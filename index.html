<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>爱是什么</title>
        <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Cutive">
        <link rel="stylesheet" href="build/styles.css">
    </head>

    <body>
        <div class="outer">
            <div class="inner">
                <div class="wrapper">
                    <div class="scene">
                        <div><span id="middler"></span></div>
                    </div>
                </div>
            </div>
        </div>

        <script src="build/theater.js"></script>
        <script>
            (function () {
                "use strict";

                var theater = new TheaterJS({erase: false});

                theater
                    .describe("middler", { speed: .16, accuracy: .6, invincibility: 4 }, "#middler")
                    .describe("oswaldl", .6, "#oswaldl")
                    .describe("twinkle", .6, "#twinkle");

                theater
                    .on("say:start, erase:start", function (eventName) {
                        var self    = this,
                            current = self.current.voice;

                        self.utils.addClass(current, "saying");
                    })
                    .on("say:end, erase:end", function (eventName) {
                        var self    = this,
                            current = self.current.voice;

                        self.utils.removeClass(current, "saying");
                    });

                theater
                    .write("middler:我们之间的故事。。。。。。。。", 400, toggleClass)
                    .write("middler:为了能在2015年的元宵节见一面，我们发生第一次争执，那晚我第一次发现情绪低落是会胃痛的。。。", 400, toggleClass)
                    .write("middler:第一次见面，非常糟糕，我在地铁口徘徊了1.5h，最后选择了离开，后来一顿折腾后我们还是见面了，可是我很在意我们之间的距离:(", 400, toggleClass)
                    .write("middler:年初二，你喝醉了，阴差阳错地给我发来消息，我们聊起不应该喝酒，少喝酒，怎么减少喝酒对胃的伤害=.=!!!或许是酒醒了，一味追逐的我开始不安你爱理不理的态度，年还没过完就分了:(",400,  toggleClass)
                    .write("middler:年后工作安顿后，几次零星的沟通后，我们在面包店以朋友的名义聚了一次，那晚你很漂亮，我很想越过朋友的界线～～～",1000, toggleClass)
                    .write("middler:520那天一次偶然的接触，你说要给我介绍对象，我忍不住再次表达了对你的爱，你说要慢慢试试。。。",400,  toggleClass)
                    .write("middler:周六就是你的生日了，你很忙，我们约定周日见，我很高兴地要了5分，并约定凑够100分就可以向你求婚!!!", 400, toggleClass)
                    .write("middler:午后我在外面的凳子上休息，你发消息告诉我下雨了：)", 400, toggleClass)
                    .write("middler:你问我漂不漂亮，我说你非常漂亮，你不信，笑我不诚实。", 400, toggleClass)
                    .write("middler:在你生日的夜晚，曾经的现象再次出现了，此时的我反倒不再疑惑了，如果爱是累的，是一个人的付出，就让放手吧，让它随风而去吧。", 400, toggleClass)
                    .write(function () { theater.play(true); });

                var body = document.getElementsByTagName("BODY")[0];
                function toggleClass (className) {
                    if (typeof className !== "string") className = "light";

                    if (theater.utils.hasClass(body, className)) theater.utils.removeClass(body, className);
                    else theater.utils.addClass(body, className);
                }
                window.theater = theater;
            })();
        </script>
    </body>
</html>
